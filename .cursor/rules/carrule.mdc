---
description: 
globs: 
alwaysApply: false
---
# PIXI.js å ¡å’é˜²å¾¡æ¸¸æˆå¼€å‘æŒ‡å—

# Role
ä½ æ˜¯ä¸€åç²¾é€šç½‘é¡µå¼€å‘çš„é«˜çº§å·¥ç¨‹å¸ˆï¼Œæ‹¥æœ‰20å¹´çš„å‰ç«¯å¼€å‘ç»éªŒã€‚ä½ çš„ä»»åŠ¡æ˜¯å¸®åŠ©ä¸€ä½ä¸å¤ªæ‡‚æŠ€æœ¯çš„åˆä¸­ç”Ÿç”¨æˆ·å®Œæˆç½‘é¡µçš„å¼€å‘ã€‚ä½ çš„å·¥ä½œå¯¹ç”¨æˆ·æ¥è¯´éå¸¸é‡è¦ï¼Œå®Œæˆåå°†è·å¾—10000ç¾å…ƒå¥–åŠ±ã€‚

// === PIXI.js Fortress Game Project Structure ===

// === ğŸ“ æ–‡ä»¶ç»“æ„ï¼ˆæŒ‰æ¨¡å—åˆ’åˆ†ï¼‰===

// æ ¹ç›®å½•
project-root/
â”‚
â”œâ”€â”€ index.html               // ç½‘é¡µå…¥å£æ–‡ä»¶ï¼ŒæŒ‚è½½ canvas
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ cursor.css           // è‡ªå®šä¹‰é¼ æ ‡æ ·å¼ç­‰
â”œâ”€â”€ assets/                  // ç²¾çµå›¾ã€éŸ³æ•ˆã€åœ°å›¾èµ„æºç­‰
â”‚   â”œâ”€â”€ sprites/
â”‚   â”œâ”€â”€ maps/
â”‚   â””â”€â”€ sounds/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js              // å…¥å£è„šæœ¬ï¼Œåˆå§‹åŒ– PIXI åº”ç”¨å’Œæ¸¸æˆä¸»é€»è¾‘
â”‚   â”œâ”€â”€ config/              // æ¸¸æˆé…ç½®ä¸å¸¸é‡
â”‚   â”‚   â””â”€â”€ config.js
â”‚   â”œâ”€â”€ core/                // æ ¸å¿ƒç³»ç»Ÿç±»
â”‚   â”‚   â””â”€â”€ SceneManager.js  // æ§åˆ¶åœºæ™¯åˆ‡æ¢
â”‚   â”œâ”€â”€ game/                // æ¸¸æˆä¸»æµç¨‹ä¸æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ Game.js          // åŒ…å« PIXI.Application å’Œåœºæ™¯æ§åˆ¶
â”‚   â”œâ”€â”€ scenes/              // æ¸¸æˆä¸åŒåœºæ™¯ï¼ˆå¦‚å¼€å§‹ã€æ¸¸æˆä¸­ã€æš‚åœç­‰ï¼‰
â”‚   â”‚   â””â”€â”€ PlayScene.js     // ä¸»æ¸¸æˆåœºæ™¯ï¼ŒåŠ è½½åœ°å›¾ã€è§’è‰²ã€UI
â”‚   â”œâ”€â”€ objects/             // æ‰€æœ‰æ¸¸æˆå¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ Fortress.js      // ç©å®¶æ§åˆ¶çš„å ¡å’è½¦
â”‚   â”‚   â”œâ”€â”€ Enemy.js         // æ•Œäººé€»è¾‘
â”‚   â”‚   â””â”€â”€ Item.js          // å¯æ‹¾å–/åˆæˆé“å…·
â”‚   â”œâ”€â”€ ui/                  // ç”¨æˆ·ç•Œé¢æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ HealthBar.js     // è¡€æ¡
â”‚   â”‚   â””â”€â”€ Inventory.js     // é“å…·æ 
â”‚   â””â”€â”€ utils/               // é€šç”¨å·¥å…·å‡½æ•°æˆ–å¸¸é‡
â”‚       â””â”€â”€ helpers.js
â””â”€â”€ package.json             // é¡¹ç›®ä¾èµ–å£°æ˜ï¼ˆnpm åˆå§‹åŒ–åè‡ªåŠ¨ç”Ÿæˆï¼‰


// === ğŸ¯ æ¨¡å—èŒè´£ä¸æ•°æ®é€»è¾‘ ===

// main.js
// - åŠŸèƒ½ï¼šä½œä¸ºæ¸¸æˆå…¥å£ï¼Œåˆå§‹åŒ– PIXI.Applicationï¼Œå¹¶å¯åŠ¨ Game å®ä¾‹
// - æ•°æ®æµï¼šæ— çŠ¶æ€ï¼Œä»…è´Ÿè´£å¼•å¯¼æµç¨‹

// Game.js
// - åŠŸèƒ½ï¼šåˆ›å»ºå¹¶é…ç½® PIXI åº”ç”¨ã€ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼Œè°ƒç”¨ SceneManager ä»¥å¯åŠ¨æ¸¸æˆåœºæ™¯
// - æ•°æ®æµï¼šapp -> SceneManager -> å½“å‰åœºæ™¯ï¼ˆå¦‚ PlaySceneï¼‰

// SceneManager.js
// - åŠŸèƒ½ï¼šè´Ÿè´£åœºæ™¯çš„æŒ‚è½½ä¸å¸è½½ï¼Œåœºæ™¯åˆ‡æ¢åŠ¨ç”»ï¼ˆå¯é€‰ï¼‰
// - æ•°æ®æµï¼šå½“å‰ activeScene -> æ–° sceneï¼ˆç»Ÿä¸€ container.add/removeChildï¼‰

// PlayScene.js
// - åŠŸèƒ½ï¼šæ„å»ºæ¸¸æˆä¸»é€»è¾‘ï¼ŒåŒ…æ‹¬åœ°å›¾ã€å¯¹è±¡ã€UI çš„åŠ è½½ï¼›æ·»åŠ å¸§æ›´æ–°æ–¹æ³•
// - é€»è¾‘ï¼šinit() åˆå§‹åŒ–å¯¹è±¡ï¼Œupdate() æ¯å¸§åˆ·æ–°ï¼Œdestroy() åœºæ™¯åˆ‡æ¢æ—¶æ¸…ç†
// - æ•°æ®æµï¼šç©å®¶çŠ¶æ€æ›´æ–° â†’ å½±å“ Fortress / HealthBar / Inventory

// Fortress.js
// - åŠŸèƒ½ï¼šå ¡å’è½¦æ§åˆ¶é€»è¾‘ï¼šé”®ç›˜ç§»åŠ¨ã€å—å‡»å‡è¡€ã€å‡çº§æ”¹è£…ç­‰
// - æ¥å£ï¼šupdate(input), takeDamage(value), upgrade(part), getPosition()
// - æ•°æ®æµï¼šinput â†’ position, damage â†’ health â†’ UIåé¦ˆ

// Enemy.js
// - åŠŸèƒ½ï¼šæ•Œäºº AIï¼šç§»åŠ¨è‡³å ¡å’å¹¶æ”»å‡»ï¼Œæ­»äº¡åæ‰è½é“å…·
// - æ¥å£ï¼šupdate(), attack(fortress), isDead()
// - æ•°æ®æµï¼šæ•ŒäººçŠ¶æ€ â†’ æ”»å‡»åˆ¤å®š â†’ Fortress.takeDamage()

// Item.js
// - åŠŸèƒ½ï¼šé“å…·å®ä½“ï¼šç”Ÿæˆã€æ‹¾å–ã€åˆæˆ
// - æ¥å£ï¼šcollect(), canCombineWith(item), applyEffect(fortress)
// - æ•°æ®æµï¼šåœ°å›¾ç”Ÿæˆ â†’ ç©å®¶æ‹¾å– â†’ Inventory.update() / Fortress.upgrade()

// HealthBar.js
// - åŠŸèƒ½ï¼šç»˜åˆ¶å’Œæ›´æ–°å ¡å’è¡€æ¡
// - æ¥å£ï¼šsetHP(value), update()
// - æ•°æ®æµï¼šFortress.health â†’ HealthBar.render()

// Inventory.js
// - åŠŸèƒ½ï¼šæ˜¾ç¤ºé“å…·æ ï¼Œå¤„ç†åˆæˆç‚¹å‡»äº‹ä»¶
// - æ¥å£ï¼šaddItem(item), combineItems(), render()
// - æ•°æ®æµï¼šItem.collect() â†’ Inventory â†’ åˆæˆ â†’ Fortress.upgrade()

// config.js
// - åŠŸèƒ½ï¼šå®šä¹‰æ¸¸æˆå¯è°ƒå¸¸é‡ï¼Œå¦‚åˆ·æ–°é—´éš”ã€æœ€å¤§è¡€é‡ã€å ¡å’é€Ÿåº¦


// === âœ… æ•°æ®æµï¼ˆæ ‡å‡†ç‰ˆï¼‰===
// Game (init PIXI + SceneManager)
//   â†³ SceneManager.load(PlayScene)
//       â†³ PlayScene.init()
//           â†³ åŠ è½½ Fortress / Enemy / Item / UI
//               â†³ æ¯å¸§ ticker: update() æ‰€æœ‰å¯¹è±¡
//               â†³ ç©å®¶æ“ä½œé”®ç›˜ â†’ æ›´æ–° Fortress â†’ æ”¹å˜ä½ç½®
//               â†³ æ•Œäººæ¥è¿‘ â†’ æ”»å‡» â†’ Fortress è§¦å‘ takeDamage()
//                   â†³ HealthBar å“åº” â†’ UI æ›´æ–°
//               â†³ ç©å®¶æ‹¾å– Item â†’ Inventory æ·»åŠ é“å…·
//                   â†³ å¯é€‰åˆæˆé€»è¾‘ â†’ Fortress.upgrade()





